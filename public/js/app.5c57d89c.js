(function(){"use strict";var t={4290:function(t,e,n){var i=n(8935),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"_fc-t-header"},[n("div",{staticClass:"_fc-t-menu"},[n("el-button",{attrs:{size:"mini",icon:"fc-icon icon-import"},on:{click:t.setJson}},[t._v(" 导入JSON")]),n("el-button",{attrs:{size:"mini",icon:"fc-icon icon-import"},on:{click:t.setOption}},[t._v(" 导入Options")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.showJson}},[t._v("生成JSON")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.showOption}},[t._v("生成Options")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.showTemplate}},[t._v("生成组件")]),n("el-button",{staticClass:"_fc-t-menu-right",attrs:{size:"mini",type:"danger"},on:{click:t.upForm}},[t._v("提交表单")])],1)]),n("fc-designer",{ref:"designer",attrs:{height:"800px"}}),n("el-dialog",{staticClass:"_fc-t-dialog",attrs:{title:t.title[t.type],visible:t.state},on:{"update:visible":function(e){t.state=e}}},[t.state?n("div",{ref:"editor"}):t._e(),t.err?n("span",{staticStyle:{color:"red"}},[t._v("输入内容格式有误!")]):t._e(),t.type>2?n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.state=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onOk}},[t._v("确 定")])],1):t._e()])],1)},o=[],s=n(4236),a=n.n(s),l=n(2232),u=n.n(l),c=(n(9803),n(762),n(8497),n(4965),n(1968),n(7931),n(4943),n(9324),n(4209),n(8914),n(3608),n(4439),n(9221)),f=n(7716),p=n.n(f);const h=["生成规则","表单规则","生成组件","设置生成规则","设置表单规则"];var d={name:"app",data(){return{state:!1,value:null,title:h,editor:null,err:!1,type:-1}},watch:{state(t){t||(this.value=null,this.err=!1)},value(){this.load()}},methods:{load(){let t;t=2===this.type?this.value:0===this.type?p().toJson(this.value,2):JSON.stringify(this.value,null,2),console.log(t),this.$nextTick((()=>{this.editor=u()(this.$refs.editor,{lineNumbers:!0,mode:2===this.type?{name:"vue"}:"application/json",gutters:["CodeMirror-lint-markers"],lint:!0,line:!0,tabSize:2,lineWrapping:!0,value:t||""}),this.editor.on("blur",(()=>{this.err=this.editor.state.lint.marked.length>0}))}))},onValidationError(t){this.err=0!==t.length},showJson(){this.state=!0,this.type=0,this.value=this.$refs.designer.getRule()},showOption(){this.state=!0,this.type=1,this.value=this.$refs.designer.getOption()},showTemplate(){this.state=!0,this.type=2,this.value=this.makeTemplate()},upForm(){console.log("提交表单"),this.value=this.$refs.designer.getRule(),this.$axios.post("/form/create",this.value).then((t=>{console.log(t),0===t.data.Code?this.$message.success("提交成功"):this.$message.error(t.data.msg)})).catch((t=>{console.log(t),this.$message.error("提交失败")}))},setJson(){this.state=!0,this.type=3,this.value=[]},setOption(){this.state=!0,this.type=4,this.value={form:{}}},onOk(){if(this.err)return;const t=this.editor.getValue();let e=JSON.parse(t);if(3===this.type){if(!Array.isArray(e))return void(this.err=!0);this.$refs.designer.setRule(p().parseJson(t))}else{if(!c.Z.Object(e)||!e.form)return void(this.err=!0);this.$refs.designer.setOption(e)}this.state=!1},makeTemplate(){const t=this.$refs.designer.getRule(),e=this.$refs.designer.getOption();return`<template>\n  <form-create\n    v-model="fapi"\n    :rule="rule"\n    :option="option"\n    @submit="onSubmit"\n  ></form-create>\n</template>\n\n<script>\nimport formCreate from "@form-create/element-ui";\n\nexport default {\n  data () {\n    return {\n        fapi: null,\n        rule: formCreate.parseJson('${p().toJson(t).replaceAll("\\","\\\\")}'),\n        option: formCreate.parseJson('${JSON.stringify(e)}')\n    }\n  },\n  methods: {\n    onSubmit (formData) {\n      console.log(formData);\n       //todo 提交表单\n    }\n  }\n}\n<\\/script>`}},beforeCreate(){window.jsonlint=a()}},m=d,v=n(1001),g=(0,v.Z)(m,r,o,!1,null,null,null),y=g.exports,b=n(2530),O=n.n(b),_=n(4549),k=n.n(_),w=n(6166),$=n.n(w);i["default"].prototype.$axios=$(),i["default"].use(k()),i["default"].use(p()),i["default"].use(O()),i["default"].config.productionTip=!1,new i["default"]({render:t=>t(y)}).$mount("#app")}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(e,i,r,o){if(!i){var s=1/0;for(c=0;c<t.length;c++){i=t[c][0],r=t[c][1],o=t[c][2];for(var a=!0,l=0;l<i.length;l++)(!1&o||s>=o)&&Object.keys(n.O).every((function(t){return n.O[t](i[l])}))?i.splice(l--,1):(a=!1,o<s&&(s=o));if(a){t.splice(c--,1);var u=r();void 0!==u&&(e=u)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[i,r,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var r,o,s=i[0],a=i[1],l=i[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)var c=l(n)}for(e&&e(i);u<s.length;u++)o=s[u],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(c)},i=self["webpackChunkfb_form_design"]=self["webpackChunkfb_form_design"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(4290)}));i=n.O(i)})();
//# sourceMappingURL=app.5c57d89c.js.map