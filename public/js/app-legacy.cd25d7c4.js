(function(){"use strict";var t={4290:function(t,e,n){n(66992),n(88674),n(19601),n(17727);var i=n(28935),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"_fc-t-header"},[n("div",{staticClass:"_fc-t-menu"},[n("el-button",{attrs:{size:"mini",icon:"fc-icon icon-import"},on:{click:t.setJson}},[t._v(" 导入JSON")]),n("el-button",{attrs:{size:"mini",icon:"fc-icon icon-import"},on:{click:t.setOption}},[t._v(" 导入Options")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.showJson}},[t._v("生成JSON")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.showOption}},[t._v("生成Options")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.showTemplate}},[t._v("生成组件")]),n("el-button",{staticClass:"_fc-t-menu-right",attrs:{size:"mini",type:"danger"},on:{click:t.upForm}},[t._v("提交表单")])],1)]),n("fc-designer",{ref:"designer",attrs:{height:"800px"}}),n("el-dialog",{staticClass:"_fc-t-dialog",attrs:{title:t.title[t.type],visible:t.state},on:{"update:visible":function(e){t.state=e}}},[t.state?n("div",{ref:"editor"}):t._e(),t.err?n("span",{staticStyle:{color:"red"}},[t._v("输入内容格式有误!")]):t._e(),t.type>2?n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.state=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onOk}},[t._v("确 定")])],1):t._e()])],1)},r=[],s=(n(38862),n(92222),n(74916),n(15306),n(68757),n(84236)),a=n.n(s),l=n(12232),u=n.n(l),c=(n(99803),n(762),n(98497),n(74965),n(91968),n(17931),n(44943),n(19324),n(44209),n(68914),n(23608),n(64439),n(9221)),f=n(67716),p=n.n(f),d=["生成规则","表单规则","生成组件","设置生成规则","设置表单规则"],h={name:"app",data:function(){return{state:!1,value:null,title:d,editor:null,err:!1,type:-1}},watch:{state:function(t){t||(this.value=null,this.err=!1)},value:function(){this.load()}},methods:{load:function(){var t,e=this;t=2===this.type?this.value:0===this.type?p().toJson(this.value,2):JSON.stringify(this.value,null,2),console.log(t),this.$nextTick((function(){e.editor=u()(e.$refs.editor,{lineNumbers:!0,mode:2===e.type?{name:"vue"}:"application/json",gutters:["CodeMirror-lint-markers"],lint:!0,line:!0,tabSize:2,lineWrapping:!0,value:t||""}),e.editor.on("blur",(function(){e.err=e.editor.state.lint.marked.length>0}))}))},onValidationError:function(t){this.err=0!==t.length},showJson:function(){this.state=!0,this.type=0,this.value=this.$refs.designer.getRule()},showOption:function(){this.state=!0,this.type=1,this.value=this.$refs.designer.getOption()},showTemplate:function(){this.state=!0,this.type=2,this.value=this.makeTemplate()},upForm:function(){var t=this;console.log("提交表单"),this.value=this.$refs.designer.getRule(),this.$axios.post("/form/create",this.value).then((function(e){console.log(e),0===e.data.Code?t.$message.success("提交成功"):t.$message.error(e.data.msg)})).catch((function(e){console.log(e),t.$message.error("提交失败")}))},setJson:function(){this.state=!0,this.type=3,this.value=[]},setOption:function(){this.state=!0,this.type=4,this.value={form:{}}},onOk:function(){if(!this.err){var t=this.editor.getValue(),e=JSON.parse(t);if(3===this.type){if(!Array.isArray(e))return void(this.err=!0);this.$refs.designer.setRule(p().parseJson(t))}else{if(!c.Z.Object(e)||!e.form)return void(this.err=!0);this.$refs.designer.setOption(e)}this.state=!1}},makeTemplate:function(){var t=this.$refs.designer.getRule(),e=this.$refs.designer.getOption();return'<template>\n  <form-create\n    v-model="fapi"\n    :rule="rule"\n    :option="option"\n    @submit="onSubmit"\n  ></form-create>\n</template>\n\n<script>\nimport formCreate from "@form-create/element-ui";\n\nexport default {\n  data () {\n    return {\n        fapi: null,\n        rule: formCreate.parseJson(\''.concat(p().toJson(t).replaceAll("\\","\\\\"),"'),\n        option: formCreate.parseJson('").concat(JSON.stringify(e),"')\n    }\n  },\n  methods: {\n    onSubmit (formData) {\n      console.log(formData);\n       //todo 提交表单\n    }\n  }\n}\n<\\/script>")}},beforeCreate:function(){window.jsonlint=a()}},m=h,v=n(1001),g=(0,v.Z)(m,o,r,!1,null,null,null),y=g.exports,b=n(42530),O=n.n(b),_=n(74549),k=n.n(_),w=n(26166),$=n.n(w);i["default"].prototype.$axios=$(),i["default"].use(k()),i["default"].use(p()),i["default"].use(O()),i["default"].config.productionTip=!1,new i["default"]({render:function(t){return t(y)}}).$mount("#app")}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=t,function(){var t=[];n.O=function(e,i,o,r){if(!i){var s=1/0;for(c=0;c<t.length;c++){i=t[c][0],o=t[c][1],r=t[c][2];for(var a=!0,l=0;l<i.length;l++)(!1&r||s>=r)&&Object.keys(n.O).every((function(t){return n.O[t](i[l])}))?i.splice(l--,1):(a=!1,r<s&&(s=r));if(a){t.splice(c--,1);var u=o();void 0!==u&&(e=u)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[i,o,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,r,s=i[0],a=i[1],l=i[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(l)var c=l(n)}for(e&&e(i);u<s.length;u++)r=s[u],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(c)},i=self["webpackChunkfb_form_design"]=self["webpackChunkfb_form_design"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(4290)}));i=n.O(i)})();
//# sourceMappingURL=app-legacy.cd25d7c4.js.map